.main-navigation {
	clear: both;
	display: block;
	float: left;
	width: 100%;

	ul {
		display: none;
		list-style: none;
		margin: 0;
		padding-left: 0;
		

	 ul {
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
		float: left;
		position: absolute;
		top: 100%;
		left: -999em;
		z-index: 99999;
		opacity: 0;
        transition: opacity 0.5s ease-in-out;

			ul {
				left: -999em;
				top: 0;
			}
			
			li {
				&:hover > ul,
				&.focus > ul {
				left: 100%;
				}
			}

			a {
				width: 200px;
			}

			:hover > a,
			.focus > a {
				transition: $transition;
			}

			a:hover,
			a.focus {
				@include transparent(bg, $color__light-purple, .95);
				color: black;
			}
		}

		li:hover > ul,
		li.focus > ul {
			left: auto;
			opacity: 1;
		}
	}

	li {
		float: left;
		position: relative;

		&:hover > a,
		&.focus > a {
			color: white; 
			@include transparent(bg, $color__dark-gray, .95);
		}
	}

	a {
		display: block;
		font-weight: 700;
		text-decoration: none;
		padding: .5em 1em .5em 0;
		color: $color__light-purple;
		line-height: 1.4em;
	}

	.current_page_item > a,
	.current-menu-item > a,
	.current_page_ancestor > a,
	.current-menu-ancestor > a {
		@include transparent(bg, $color__dark-gray, .95);
	}
}

/* Small menu. */
.menu-toggle,
.main-navigation.toggled ul {
	display: block;
	float: right;
	/*position: absolute;
	right: 1em;
	top: 1em;*/
}

.menu-toggle {
	@include button($color__light-purple, $color__light-purple);
	&:hover {
		border-color: white;
		color: white;
	}

	&:active,
	&:focus {
		border-color: white;
		color: white;
		outline: none;
	}
}


@media screen and (min-width: $query__medium) {
	.menu-toggle {
		display: none;
	}
	
	.main-navigation {
		
		.menu-item-has-children > a,
		.page_item_has_children > a {
		/*	padding-right: 2em;
			background: $color__dark-gray;*/
		}
		
		ul {
			display: block;
			display: flex;
			flex-wrap: wrap;
			
			ul {
				flex-direction: column;
				@include transparent(bg, $color__dark-gray, .95);
				margin-left: 0;

				li {
					padding-left: 0;
					
					a {
						width: 218px;
						background: none;
					}
				}
			}
			
			li {
					
				a {
					padding: .4em 1em; 
				}
			}
		}
		
	}
}

@media screen and (min-width: $query__medium) {
	.main-navigation {
		
		ul {
			justify-content: flex-end;
			padding-top: 0;
		}
		
	}
}

@media screen and (max-width: $query__medium) {
	.site-branding {
	    width: 50% ;
	    float: left;
	    clear: none;
	}
	
	.nav-menu {
		position: absolute;
	    top: 46px;
	    right: 2em;
	    width: 250px;
	    padding: 1em 0;
	    
	    @media screen and (max-width: $query__mobile) {
	    	right: 1em;
	    }
	}

	
	.main-navigation {
	    clear: none;
	    display: block;
	    float: right;
	    width: 50%;	
	    
		ul {
			width: 250px;
			@include transparent(bg, black, .95);

			li {
				width: 250px;
				a {
					padding: .5em 0;
   					font-size: .8em;
   					color: $color__light-purple;
				}
				
				ul {
					width: 100%;
					background: transparent;
				}	
				
				&:has-children {
			    	:after {
			    		content: '&#9662;';
			    	}
			    } 

			}
			ul {
				display: block;
				width: 100%;
				clear: both;
				box-shadow: none;
			    float: left;
			    position: absolute;
			    top: 100%;
			    left: 0;
			    z-index: 99999;
			    opacity: 1;
			    transition: none;
			    

				li {
					display: block;
					clear: both;
					padding: 0 1em;
					width: 250px;
					
					ul, &:hover, &:focus {
						left: 0;
						opacity: 1;
						transition: none; 
					}
					
					&:hover > ul {
						left: 0;
						opacity: 1;
						transition: none; 
					}
				}
			}
			li {
				display: block;
				clear: both;
				padding: 0 1em;
			}
			
			ul {
				display: block;
				position: relative;
				clear: both;
				
				li {
					display: block;
				}
			}

		}
	}
}
